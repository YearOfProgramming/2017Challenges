% gs -dBATCH square-sort-test.txt
%

(square-sort.txt) run

% test if 2 arrays have the same simple elements
/array-eq {
    /a2 exch def
    /a1 exch def
    a1 length a2 length ne
    {
        false
    }
    {
        /all-true true def
        0 1 a1 length 1 sub {
            a1 1 index get a2 2 index get ne
            {
                /all-true false def
                pop exit
            }
            {
                pop
            } ifelse
        } for
        all-true
    } ifelse
} def

/if-not-println {
    exch not { println } { pop } ifelse
} def

/test-arrays-same { array-eq (Arrays shouldn't be different) if-not-println } def 

[ -13 -2 0 1 ] square-sort [ 0 1 4 169 ] test-arrays-same
[ -13 -2 0 1 ] square-sort [ 0 -1 4 169 ] array-eq not (Arrays shouldn't be different) if-not-println

[ -2 0 1 4 ]   square-sort [ 0 1 4 16 ] test-arrays-same
[ -2 1 4 100 ] square-sort [ 1 4 16 10000 ] test-arrays-same
[ -113 -54 -2 1 10 14 ] square-sort [ 1 4 100 196 2916 12769 ] test-arrays-same

